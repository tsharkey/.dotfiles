##############################################################################
#
#  Git
#
##############################################################################

# push upstream to current branch name, if on master ask if that's ok
gitp() {
    # requires git zsh plugin
    git add -A

    # read the commit message from user
    echo -n "Enter commit message: " 
    read -r commit_message

    git commit -m "${commit_message}"

    # if on master branch
    branch=$(git rev-parse --abbrev-ref HEAD)
    if [ "$branch" = "master" ]; then
        echo "Are you sure you want to push to master? (y/n)"
        read -r answer
        if [ "$answer" = "n" ]; then
            return
        fi
    fi

    # check if branch has upstream
    if ! git rev-parse --verify --quiet @{upstream} > /dev/null; then
        echo "Creating upstream branch"
        git push -u origin "${branch}"
        return
    fi
  git push origin "$(git rev-parse --abbrev-ref HEAD)"
}

##############################################################################
#
#  Utility
#
##############################################################################

# mkdir and cd into it
mdir() {
    mkdir -p "$@" && cd "$@" || exit
}

# add a path to the PATH variable only if it is not already there
pathadd() {
    if [ -d "$1" ] && [[ ":$PATH:" != *":$1:"* ]]; then
        PATH="${PATH:+"$PATH:"}$1"
    fi
}
